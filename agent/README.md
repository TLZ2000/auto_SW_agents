To run our agent you need to execute the following command:

```bash
node agent.js <OPTIONS>
```

inside this folder. Note also that a _Deliveroo.js_ server must also be active and listening on the address specified at the beginning of the file _agent.js_. Follows a rapid description of the possible parameters of the script.

| Attribute   | Description                                                                                                                                                                                                                                                                                                                                                                          |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| -a <NUMBER> | Set the current agent in _multi-agent_ mode, if the <NUMBER> value is = 1 then this agent becomes AGENT1, otherwise it becomes AGENT2. The tokens and ids of both these agents are hardcoded into the _agent.js_ file                                                                                                                                                                |
| -s <NUMBER> | Set the current agent in _single-agent_ mode, the <NUMBER> specifies the probability of executing an _automated planning_ action, it must be a value in the range [0, 100]. The agent uses the dedicated _single-agent token_ and id hardcoded into the _agent.js_ file. If no value is specified, a default 50% probability is automatically selected                               |
| -r <NUMBER> | Set the current agent in _single-agent_ mode, the <NUMBER> specifies the probability of executing an _automated planning_ action, it must be a value in the range [0, 100]. The server will generate a random access token and id for this agent, useful when you need to load multiple single agents. If no value is specified, a default 50% probability is automatically selected |
| -w          | Optional parameter, forces the completion of a planning action before generating new actions                                                                                                                                                                                                                                                                                         |

To launch the script you need to specify at least one of these three tokens: _-a_, _-s_, _-r_. The token _-w_ is optional and will modify the behavior only of the _single-agent_ mode (as the _multi-agent_ do not use automated planning).

Additionally, a number of constant are available at the beginning of the _agent.js_ file, which will modify the agent behavior, here a rapid description:

| Name                                | Default value              | Description                                                                                                                                                                                              |
| ----------------------------------- | -------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AGENT1_ID                           | "a6cdae"                   | Hardcoded id for AGENT1 for multi-agent mode                                                                                                                                                             |
| AGENT2_ID                           | "ff8ff0"                   | Hardcoded id for AGENT2 for multi-agent mode                                                                                                                                                             |
| AGENT_S_ID                          | "e12f73"                   | Hardcoded id for single-agent mode                                                                                                                                                                       |
| AGENT1_TOKEN                        | <too long to include here> | Hardcoded token for AGENT1 for multi-agent mode                                                                                                                                                          |
| AGENT2_TOKEN                        | <too long to include here> | Hardcoded token for AGENT2 for multi-agent mode                                                                                                                                                          |
| AGENT_S_TOKEN                       | <too long to include here> | Hardcoded token for single-agent mode                                                                                                                                                                    |
| SERVER_ADDRS                        | "http://localhost:8080"    |                                                                                                                                                                                                          |
| MAX_EXPLORABLE_SPAWN_CELLS          | 100                        | Maximum number of explorable cells considered when selecting a random cell to explore                                                                                                                    |
| OUTVIEW_MEMORY_DIFFERENCE_THRESHOLD | 10000                      | Length in ms of the time window considered during the memory revision for the items outside of sensing range                                                                                             |
| PARCEL_DISTANCE_LOW                 | 3                          | Maximum distance of the "near" parcels considered when computing the parcel reward                                                                                                                       |
| PARCEL_DISTANCE_MID                 | 6                          | Maximum distance of the "near-distant" parcels considered when computing the parcel reward                                                                                                               |
| PARCEL_DISTANCE_HIGH                | 10                         | Maximum distance of the "distant" parcels considered when computing the parcel reward                                                                                                                    |
| PARCEL_WEIGHT_LOW                   | 10                         | Reward multiplier for the "near" parcels                                                                                                                                                                 |
| PARCEL_WEIGHT_MID                   | 5                          | Reward multiplier for the "near-distant" parcels                                                                                                                                                         |
| PARCEL_WEIGHT_HIGH                  | 2.5                        | Reward multiplier for the "distant" parcels                                                                                                                                                              |
| MOVES_SCALE_FACTOR                  | 100                        | Scale factor applied to the "move counter" mechanism to increase the probability of a delivery intention, lower values mean higher delivery probability                                                  |
| MOVES_SCALE_FACTOR_NO_DECAY         | 40                         | Scale factor applied to the "move counter" mechanism to increase the probability of a delivery intention when the parcels have an INFINITE decay interval, lower values mean higher delivery probability |
| TIMED_EXPLORE_ALPHA                 | 5                          | Alpha value used when selecting a timed explore target                                                                                                                                                   |
| TIMED_EXPLORE_BETA                  | 1                          | Beta value used when selecting a timed explore target                                                                                                                                                    |
| TIMED_EXPLORE                       | 0.99                       | Probability of select the timed-explore strategy, instead of a distant-explore strategy, when an explore intention is pushed                                                                             |
| OPTION_GENERATION_INTERVAL          | 50                         | Ms between an option generation and another                                                                                                                                                              |
| MEMORY_REVISION_INTERVAL            | 50                         | Ms between a memory revision and another                                                                                                                                                                 |
| SHARE_PARCEL_TIMEOUT                | 3000                       | Maximum time, in ms, the agent will await at the wait position/exchange position during a _recover_shared_parcel_ / _share_parcel_ intention                                                             |
| SHARE_PARCEL_WAIT_MUX               | 2                          | How many movement durations the agent should wait in the _support_position_ for the pal to pick up the parcels during a _share_parcel_ intention                                                         |
| MAX_STUCK_WAIT                      | 5                          | Maximum number of movement durations the agent should wait when bumping into another agent, this is necessary to resolve stale situations when bumping                                                   |
| DEFAULT_PLANNING_PROB               | 0.5                        | Default planning probability adopted when no value is specified in the command line                                                                                                                      |
| MAX_OCCUPIED_PATH_COUNTER           | 3                          | Maximum number of checks on during the Move plan to decide if a path is occupied by another agent.                                                                                                       |
